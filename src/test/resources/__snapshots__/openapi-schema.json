{
  "info": {
    "title": "user-roles",
    "version": "v1",
    "description": "REST API for user-roles."
  },
  "tags": [],
  "servers": [
    {
      "url": "http://localhost:8080"
    }
  ],
  "paths": {
    "/api/administration/users": {
      "get": {
        "summary": "List users from identity provider service, along with their associated roles",
        "tags": [
          "/api"
        ],
        "parameters": [
          {
            "schema": {
              "type": "integer"
            },
            "in": "query",
            "name": "limit",
            "required": true
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "cursor",
            "required": false
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "searchString",
            "required": false
          },
          {
            "in": "query",
            "name": "searchField",
            "required": false,
            "schema": {
              "$ref": "#/components/schemas/UserSearchField"
            }
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "orgId",
            "required": false
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "applicationName",
            "required": false
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "roleName",
            "required": false
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "example": {
                  "nextCursor": "example-pagination-token___0",
                  "users": [
                    {
                      "username": "test.testesen",
                      "userId": "03e2d410-6591-4409-be77-6aca0833656d",
                      "email": {
                        "value": "test@example.org",
                        "verified": true
                      },
                      "phoneNumber": {
                        "value": "12345678",
                        "verified": true
                      },
                      "userStatus": "CONFIRMED",
                      "enabled": true,
                      "createdAt": "2025-12-03T11:32:59Z",
                      "attributes": {
                        "name": "Test Testesen"
                      },
                      "roles": [
                        {
                          "applicationName": "example-application",
                          "orgId": "example-org",
                          "roleName": "admin",
                          "roleValue": {}
                        }
                      ]
                    }
                  ]
                },
                "schema": {
                  "$ref": "#/components/schemas/ListUsersResponse"
                }
              }
            }
          }
        },
        "security": [],
        "operationId": "listUsers",
        "deprecated": false
      },
      "post": {
        "summary": "Register new user in identity provider service, and create associated roles",
        "tags": [
          "/api"
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "example": {
                "user": {
                  "username": "test.testesen",
                  "email": {
                    "value": "test@example.org",
                    "verified": true
                  },
                  "phoneNumber": {
                    "value": "12345678",
                    "verified": true
                  },
                  "attributes": {
                    "name": "Test Testesen"
                  },
                  "roles": [
                    {
                      "applicationName": "example-application",
                      "orgId": "example-org",
                      "roleName": "admin",
                      "roleValue": {}
                    }
                  ]
                },
                "invitationMessages": [
                  "EMAIL"
                ]
              },
              "schema": {
                "$ref": "#/components/schemas/CreateUserRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "example": {
                  "username": "test.testesen",
                  "userId": "03e2d410-6591-4409-be77-6aca0833656d",
                  "email": {
                    "value": "test@example.org",
                    "verified": true
                  },
                  "phoneNumber": {
                    "value": "12345678",
                    "verified": true
                  },
                  "userStatus": "CONFIRMED",
                  "enabled": true,
                  "createdAt": "2025-12-03T11:32:59Z",
                  "attributes": {
                    "name": "Test Testesen"
                  },
                  "roles": [
                    {
                      "applicationName": "example-application",
                      "orgId": "example-org",
                      "roleName": "admin",
                      "roleValue": {}
                    }
                  ]
                },
                "schema": {
                  "$ref": "#/components/schemas/UserDataWithRoles"
                }
              }
            }
          }
        },
        "security": [],
        "operationId": "createUser",
        "deprecated": false
      },
      "put": {
        "summary": "Update existing user in identity provider service, and their associated roles",
        "tags": [
          "/api"
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "example": {
                "user": {
                  "username": "test.testesen",
                  "email": {
                    "value": "test@example.org",
                    "verified": true
                  },
                  "phoneNumber": {
                    "value": "12345678",
                    "verified": true
                  },
                  "attributes": {
                    "name": "Test Testesen"
                  },
                  "roles": [
                    {
                      "applicationName": "example-application",
                      "orgId": "example-org",
                      "roleName": "admin",
                      "roleValue": {}
                    }
                  ]
                }
              },
              "schema": {
                "$ref": "#/components/schemas/UpdateUserRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "",
            "content": {}
          }
        },
        "security": [],
        "operationId": "updateUser",
        "deprecated": false
      }
    },
    "/api/administration/users/{username}": {
      "delete": {
        "summary": "Delete user from identity provider service, and its associated roles",
        "tags": [
          "/api"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "username",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {}
          }
        },
        "security": [],
        "operationId": "deleteUser",
        "deprecated": false
      },
      "get": {
        "summary": "Get user by username from identity provider service, with associated roles",
        "tags": [
          "/api"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "username",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "example": {
                  "username": "test.testesen",
                  "userId": "03e2d410-6591-4409-be77-6aca0833656d",
                  "email": {
                    "value": "test@example.org",
                    "verified": true
                  },
                  "phoneNumber": {
                    "value": "12345678",
                    "verified": true
                  },
                  "userStatus": "CONFIRMED",
                  "enabled": true,
                  "createdAt": "2025-12-03T11:32:59Z",
                  "attributes": {
                    "name": "Test Testesen"
                  },
                  "roles": [
                    {
                      "applicationName": "example-application",
                      "orgId": "example-org",
                      "roleName": "admin",
                      "roleValue": {}
                    }
                  ]
                },
                "schema": {
                  "$ref": "#/components/schemas/UserDataWithRoles"
                }
              }
            }
          }
        },
        "security": [],
        "operationId": "getUser",
        "deprecated": false
      }
    },
    "/api/administration/users/{username}/reset-password": {
      "post": {
        "summary": "Reset password for user in identity provider",
        "tags": [
          "/api"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "username",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {}
          }
        },
        "security": [],
        "operationId": "resetUserPassword",
        "deprecated": false
      }
    },
    "/api/userroles": {
      "get": {
        "summary": "Get user roles",
        "description": "Get user roles",
        "tags": [
          "/api"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "orgId",
            "required": false
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "query",
            "name": "roleName",
            "required": false
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "example": {
                  "userRoles": [
                    {
                      "userId": "test.testesen",
                      "roles": [
                        {
                          "applicationName": "example-application",
                          "orgId": "example-org",
                          "roleName": "admin",
                          "roleValue": {}
                        }
                      ]
                    }
                  ]
                },
                "schema": {
                  "$ref": "#/components/schemas/ListUserRoleDto"
                }
              }
            }
          }
        },
        "security": [],
        "operationId": "getApiUserroles",
        "deprecated": false
      }
    },
    "/api/userroles/{userId}": {
      "delete": {
        "summary": "Delete user role",
        "description": "Delete user role",
        "tags": [
          "/api"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "userId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {}
          }
        },
        "security": [],
        "operationId": "deleteApiUserroles_userId",
        "deprecated": false
      },
      "get": {
        "summary": "Get userRole",
        "description": "Get userRole",
        "tags": [
          "/api"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "userId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "example": {
                  "userId": "test.testesen",
                  "roles": [
                    {
                      "applicationName": "example-application",
                      "orgId": "example-org",
                      "roleName": "admin",
                      "roleValue": {}
                    }
                  ]
                },
                "schema": {
                  "$ref": "#/components/schemas/UserRoleDto"
                }
              }
            }
          }
        },
        "security": [],
        "operationId": "getApiUserroles_userId",
        "deprecated": false
      },
      "put": {
        "summary": "Update user role",
        "description": "Update user role",
        "tags": [
          "/api"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "userId",
            "required": true
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "example": {
                "roles": [
                  {
                    "applicationName": "example-application",
                    "orgId": "example-org",
                    "roleName": "admin",
                    "roleValue": {}
                  }
                ]
              },
              "schema": {
                "$ref": "#/components/schemas/UpdateRoleRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "example": {
                  "userId": "test.testesen",
                  "roles": [
                    {
                      "applicationName": "example-application",
                      "orgId": "example-org",
                      "roleName": "admin",
                      "roleValue": {}
                    }
                  ]
                },
                "schema": {
                  "$ref": "#/components/schemas/UserRoleDto"
                }
              }
            }
          }
        },
        "security": [],
        "operationId": "putApiUserroles_userId",
        "deprecated": false
      }
    }
  },
  "components": {
    "schemas": {
      "UserRoleDto": {
        "properties": {
          "userId": {
            "example": "test.testesen",
            "type": "string",
            "nullable": false
          },
          "roles": {
            "items": {
              "$ref": "#/components/schemas/Role"
            },
            "example": [
              {
                "applicationName": "example-application",
                "orgId": "example-org",
                "roleName": "admin",
                "roleValue": {}
              }
            ],
            "type": "array",
            "nullable": false
          }
        },
        "example": {
          "userId": "test.testesen",
          "roles": [
            {
              "applicationName": "example-application",
              "orgId": "example-org",
              "roleName": "admin",
              "roleValue": {}
            }
          ]
        },
        "type": "object",
        "required": [
          "roles",
          "userId"
        ]
      },
      "Role": {
        "properties": {
          "applicationName": {
            "example": "example-application",
            "type": "string",
            "nullable": true
          },
          "orgId": {
            "example": "example-org",
            "type": "string",
            "nullable": true
          },
          "roleName": {
            "example": "admin",
            "type": "string",
            "nullable": false
          },
          "roleValue": {
            "additionalProperties": {
              "properties": {},
              "example": {},
              "type": "object"
            },
            "type": "object"
          }
        },
        "example": {
          "applicationName": "example-application",
          "orgId": "example-org",
          "roleName": "admin",
          "roleValue": {}
        },
        "type": "object",
        "required": [
          "roleName"
        ]
      },
      "UpdateRoleRequest": {
        "properties": {
          "roles": {
            "items": {
              "$ref": "#/components/schemas/Role"
            },
            "example": [
              {
                "applicationName": "example-application",
                "orgId": "example-org",
                "roleName": "admin",
                "roleValue": {}
              }
            ],
            "type": "array",
            "nullable": false
          }
        },
        "example": {
          "roles": [
            {
              "applicationName": "example-application",
              "orgId": "example-org",
              "roleName": "admin",
              "roleValue": {}
            }
          ]
        },
        "type": "object",
        "required": [
          "roles"
        ]
      },
      "ListUserRoleDto": {
        "properties": {
          "userRoles": {
            "items": {
              "$ref": "#/components/schemas/UserRoleDto"
            },
            "example": [
              {
                "userId": "test.testesen",
                "roles": [
                  {
                    "applicationName": "example-application",
                    "orgId": "example-org",
                    "roleName": "admin",
                    "roleValue": {}
                  }
                ]
              }
            ],
            "type": "array",
            "nullable": false
          }
        },
        "example": {
          "userRoles": [
            {
              "userId": "test.testesen",
              "roles": [
                {
                  "applicationName": "example-application",
                  "orgId": "example-org",
                  "roleName": "admin",
                  "roleValue": {}
                }
              ]
            }
          ]
        },
        "type": "object",
        "required": [
          "userRoles"
        ]
      },
      "UserDataWithRoles": {
        "properties": {
          "username": {
            "example": "test.testesen",
            "type": "string",
            "nullable": false
          },
          "userId": {
            "example": "03e2d410-6591-4409-be77-6aca0833656d",
            "type": "string",
            "nullable": false
          },
          "email": {
            "$ref": "#/components/schemas/UserEmail"
          },
          "phoneNumber": {
            "$ref": "#/components/schemas/UserPhoneNumber"
          },
          "userStatus": {
            "example": "CONFIRMED",
            "type": "string",
            "nullable": false
          },
          "enabled": {
            "example": true,
            "type": "boolean",
            "nullable": false
          },
          "createdAt": {
            "example": "2025-12-03T11:32:59Z",
            "format": "date-time",
            "type": "string",
            "nullable": false
          },
          "attributes": {
            "additionalProperties": {
              "properties": {
                "name": {
                  "example": "Test Testesen",
                  "type": "string",
                  "nullable": true
                }
              },
              "example": {
                "name": "Test Testesen"
              },
              "type": "object"
            },
            "type": "object"
          },
          "roles": {
            "items": {
              "$ref": "#/components/schemas/Role"
            },
            "example": [
              {
                "applicationName": "example-application",
                "orgId": "example-org",
                "roleName": "admin",
                "roleValue": {}
              }
            ],
            "type": "array",
            "nullable": false
          }
        },
        "example": {
          "username": "test.testesen",
          "userId": "03e2d410-6591-4409-be77-6aca0833656d",
          "email": {
            "value": "test@example.org",
            "verified": true
          },
          "phoneNumber": {
            "value": "12345678",
            "verified": true
          },
          "userStatus": "CONFIRMED",
          "enabled": true,
          "createdAt": "2025-12-03T11:32:59Z",
          "attributes": {
            "name": "Test Testesen"
          },
          "roles": [
            {
              "applicationName": "example-application",
              "orgId": "example-org",
              "roleName": "admin",
              "roleValue": {}
            }
          ]
        },
        "type": "object",
        "required": [
          "attributes",
          "createdAt",
          "enabled",
          "roles",
          "userId",
          "userStatus",
          "username"
        ]
      },
      "UserEmail": {
        "properties": {
          "value": {
            "example": "test@example.org",
            "type": "string",
            "nullable": false
          },
          "verified": {
            "example": true,
            "type": "boolean",
            "nullable": false
          }
        },
        "example": {
          "value": "test@example.org",
          "verified": true
        },
        "type": "object",
        "required": [
          "value",
          "verified"
        ]
      },
      "UserPhoneNumber": {
        "properties": {
          "value": {
            "example": "12345678",
            "type": "string",
            "nullable": false
          },
          "verified": {
            "example": true,
            "type": "boolean",
            "nullable": false
          }
        },
        "example": {
          "value": "12345678",
          "verified": true
        },
        "type": "object",
        "required": [
          "value",
          "verified"
        ]
      },
      "ListUsersResponse": {
        "properties": {
          "nextCursor": {
            "example": "example-pagination-token___0",
            "type": "string",
            "nullable": true
          },
          "users": {
            "items": {
              "$ref": "#/components/schemas/UserDataWithRoles"
            },
            "example": [
              {
                "username": "test.testesen",
                "userId": "03e2d410-6591-4409-be77-6aca0833656d",
                "email": {
                  "value": "test@example.org",
                  "verified": true
                },
                "phoneNumber": {
                  "value": "12345678",
                  "verified": true
                },
                "userStatus": "CONFIRMED",
                "enabled": true,
                "createdAt": "2025-12-03T11:32:59Z",
                "attributes": {
                  "name": "Test Testesen"
                },
                "roles": [
                  {
                    "applicationName": "example-application",
                    "orgId": "example-org",
                    "roleName": "admin",
                    "roleValue": {}
                  }
                ]
              }
            ],
            "type": "array",
            "nullable": false
          }
        },
        "example": {
          "nextCursor": "example-pagination-token___0",
          "users": [
            {
              "username": "test.testesen",
              "userId": "03e2d410-6591-4409-be77-6aca0833656d",
              "email": {
                "value": "test@example.org",
                "verified": true
              },
              "phoneNumber": {
                "value": "12345678",
                "verified": true
              },
              "userStatus": "CONFIRMED",
              "enabled": true,
              "createdAt": "2025-12-03T11:32:59Z",
              "attributes": {
                "name": "Test Testesen"
              },
              "roles": [
                {
                  "applicationName": "example-application",
                  "orgId": "example-org",
                  "roleName": "admin",
                  "roleValue": {}
                }
              ]
            }
          ]
        },
        "type": "object",
        "required": [
          "users"
        ]
      },
      "UserSearchField": {
        "example": "USERNAME",
        "enum": [
          "USERNAME",
          "USER_ID",
          "EMAIL",
          "PHONE_NUMBER",
          "NAME",
          "GIVEN_NAME",
          "FAMILY_NAME",
          "PREFERRED_USERNAME",
          "USER_STATUS"
        ],
        "type": "string",
        "nullable": false
      },
      "CreateUserRequest": {
        "properties": {
          "user": {
            "$ref": "#/components/schemas/UserUpdateData"
          },
          "invitationMessages": {
            "items": {
              "$ref": "#/components/schemas/InvitationMessageType"
            },
            "example": [
              "EMAIL"
            ],
            "type": "array",
            "nullable": false
          }
        },
        "example": {
          "user": {
            "username": "test.testesen",
            "email": {
              "value": "test@example.org",
              "verified": true
            },
            "phoneNumber": {
              "value": "12345678",
              "verified": true
            },
            "attributes": {
              "name": "Test Testesen"
            },
            "roles": [
              {
                "applicationName": "example-application",
                "orgId": "example-org",
                "roleName": "admin",
                "roleValue": {}
              }
            ]
          },
          "invitationMessages": [
            "EMAIL"
          ]
        },
        "type": "object",
        "required": [
          "invitationMessages",
          "user"
        ]
      },
      "UserUpdateData": {
        "properties": {
          "username": {
            "example": "test.testesen",
            "type": "string",
            "nullable": false
          },
          "email": {
            "$ref": "#/components/schemas/UserEmail"
          },
          "phoneNumber": {
            "$ref": "#/components/schemas/UserPhoneNumber"
          },
          "attributes": {
            "additionalProperties": {
              "properties": {
                "name": {
                  "example": "Test Testesen",
                  "type": "string",
                  "nullable": true
                }
              },
              "example": {
                "name": "Test Testesen"
              },
              "type": "object"
            },
            "type": "object"
          },
          "roles": {
            "items": {
              "$ref": "#/components/schemas/Role"
            },
            "example": [
              {
                "applicationName": "example-application",
                "orgId": "example-org",
                "roleName": "admin",
                "roleValue": {}
              }
            ],
            "type": "array",
            "nullable": false
          }
        },
        "example": {
          "username": "test.testesen",
          "email": {
            "value": "test@example.org",
            "verified": true
          },
          "phoneNumber": {
            "value": "12345678",
            "verified": true
          },
          "attributes": {
            "name": "Test Testesen"
          },
          "roles": [
            {
              "applicationName": "example-application",
              "orgId": "example-org",
              "roleName": "admin",
              "roleValue": {}
            }
          ]
        },
        "type": "object",
        "required": [
          "attributes",
          "roles",
          "username"
        ]
      },
      "InvitationMessageType": {
        "example": "EMAIL",
        "enum": [
          "EMAIL",
          "SMS"
        ],
        "type": "string",
        "nullable": false
      },
      "UpdateUserRequest": {
        "properties": {
          "user": {
            "$ref": "#/components/schemas/UserUpdateData"
          }
        },
        "example": {
          "user": {
            "username": "test.testesen",
            "email": {
              "value": "test@example.org",
              "verified": true
            },
            "phoneNumber": {
              "value": "12345678",
              "verified": true
            },
            "attributes": {
              "name": "Test Testesen"
            },
            "roles": [
              {
                "applicationName": "example-application",
                "orgId": "example-org",
                "roleName": "admin",
                "roleValue": {}
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "user"
        ]
      }
    },
    "securitySchemes": {}
  },
  "openapi": "3.0.0"
}
